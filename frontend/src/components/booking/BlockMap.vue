<template>
  <div class="block-map">
    <svg width="1265" height="732" viewBox="0 0 1265 732" fill="none" xmlns="http://www.w3.org/2000/svg">
      <mask id="path-1-inside-1_635_4172" fill="white">
        <path fill-rule="evenodd" clip-rule="evenodd" d="M727.359 0H831.473V61.6005V209.095H893.073V313.208H831.473H683.979V367H579.865V313.208V305.4V165.714H520V61.6005H579.865H581.6H727.359V0Z"/>
      </mask>
      <path id="b-block" class="girls-block" :class="{ 'girls-active': block === 2 }" @click="chooseBBlock" fill-rule="evenodd" clip-rule="evenodd" d="M727.359 0H831.473V61.6005V209.095H893.073V313.208H831.473H683.979V367H579.865V313.208V305.4V165.714H520V61.6005H579.865H581.6H727.359V0Z" fill="#F6F6F6"/>
      <path d="M831.473 0H832.473V-1H831.473V0ZM727.359 0V-1H726.359V0H727.359ZM831.473 209.095H830.473V210.095H831.473V209.095ZM893.073 209.095H894.073V208.095H893.073V209.095ZM893.073 313.208V314.208H894.073V313.208H893.073ZM683.979 313.208V312.208H682.979V313.208H683.979ZM683.979 367V368H684.979V367H683.979ZM579.865 367H578.865V368H579.865V367ZM579.865 165.714H580.865V164.714H579.865V165.714ZM520 165.714H519V166.714H520V165.714ZM520 61.6005V60.6005H519V61.6005H520ZM727.359 61.6005V62.6005H728.359V61.6005H727.359ZM831.473 -1H727.359V1H831.473V-1ZM832.473 61.6005V0H830.473V61.6005H832.473ZM832.473 209.095V61.6005H830.473V209.095H832.473ZM831.473 210.095H893.073V208.095H831.473V210.095ZM892.073 209.095V313.208H894.073V209.095H892.073ZM893.073 312.208H831.473V314.208H893.073V312.208ZM683.979 314.208H831.473V312.208H683.979V314.208ZM684.979 367V313.208H682.979V367H684.979ZM579.865 368H683.979V366H579.865V368ZM578.865 313.208V367H580.865V313.208H578.865ZM578.865 305.4V313.208H580.865V305.4H578.865ZM578.865 165.714V305.4H580.865V165.714H578.865ZM520 166.714H579.865V164.714H520V166.714ZM519 61.6005V165.714H521V61.6005H519ZM579.865 60.6005H520V62.6005H579.865V60.6005ZM581.6 60.6005H579.865V62.6005H581.6V60.6005ZM727.359 60.6005H581.6V62.6005H727.359V60.6005ZM726.359 0V61.6005H728.359V0H726.359Z" fill="black" mask="url(#path-1-inside-1_635_4172)"/>
      <path d="M694.443 186V151.091H707.807C710.33 151.091 712.426 151.489 714.097 152.284C715.778 153.068 717.034 154.142 717.864 155.506C718.705 156.869 719.125 158.415 719.125 160.142C719.125 161.562 718.852 162.778 718.307 163.79C717.761 164.79 717.028 165.602 716.108 166.227C715.188 166.852 714.159 167.301 713.023 167.574V167.915C714.261 167.983 715.449 168.364 716.585 169.057C717.733 169.739 718.67 170.705 719.398 171.955C720.125 173.205 720.489 174.716 720.489 176.489C720.489 178.295 720.051 179.92 719.176 181.364C718.301 182.795 716.983 183.926 715.222 184.756C713.46 185.585 711.244 186 708.574 186H694.443ZM700.767 180.716H707.568C709.864 180.716 711.517 180.278 712.528 179.403C713.551 178.517 714.062 177.381 714.062 175.994C714.062 174.96 713.807 174.028 713.295 173.199C712.784 172.358 712.057 171.699 711.114 171.222C710.17 170.733 709.045 170.489 707.739 170.489H700.767V180.716ZM700.767 165.938H707.023C708.114 165.938 709.097 165.739 709.972 165.341C710.847 164.932 711.534 164.358 712.034 163.619C712.545 162.869 712.801 161.983 712.801 160.96C712.801 159.608 712.324 158.494 711.369 157.619C710.426 156.744 709.023 156.307 707.159 156.307H700.767V165.938Z" fill="black"/>
      <path d="M678.114 221V203.545H680.125V209.989H680.295C680.443 209.761 680.648 209.472 680.909 209.119C681.176 208.761 681.557 208.443 682.051 208.165C682.551 207.881 683.227 207.739 684.08 207.739C685.182 207.739 686.153 208.014 686.994 208.565C687.835 209.116 688.491 209.898 688.963 210.909C689.435 211.92 689.67 213.114 689.67 214.489C689.67 215.875 689.435 217.077 688.963 218.094C688.491 219.105 687.838 219.889 687.003 220.446C686.168 220.997 685.205 221.273 684.114 221.273C683.273 221.273 682.599 221.134 682.094 220.855C681.588 220.571 681.199 220.25 680.926 219.892C680.653 219.528 680.443 219.227 680.295 218.989H680.057V221H678.114ZM680.091 214.455C680.091 215.443 680.236 216.315 680.526 217.071C680.815 217.821 681.239 218.409 681.795 218.835C682.352 219.256 683.034 219.466 683.841 219.466C684.682 219.466 685.384 219.244 685.946 218.801C686.514 218.352 686.94 217.75 687.224 216.994C687.514 216.233 687.659 215.386 687.659 214.455C687.659 213.534 687.517 212.705 687.233 211.966C686.955 211.222 686.531 210.634 685.963 210.202C685.401 209.764 684.693 209.545 683.841 209.545C683.023 209.545 682.335 209.753 681.778 210.168C681.222 210.577 680.801 211.151 680.517 211.889C680.233 212.622 680.091 213.477 680.091 214.455ZM694.759 203.545V221H692.747V203.545H694.759ZM703.761 221.273C702.579 221.273 701.542 220.991 700.65 220.429C699.763 219.866 699.07 219.08 698.57 218.068C698.076 217.057 697.829 215.875 697.829 214.523C697.829 213.159 698.076 211.969 698.57 210.952C699.07 209.935 699.763 209.145 700.65 208.582C701.542 208.02 702.579 207.739 703.761 207.739C704.942 207.739 705.977 208.02 706.863 208.582C707.755 209.145 708.448 209.935 708.942 210.952C709.442 211.969 709.692 213.159 709.692 214.523C709.692 215.875 709.442 217.057 708.942 218.068C708.448 219.08 707.755 219.866 706.863 220.429C705.977 220.991 704.942 221.273 703.761 221.273ZM703.761 219.466C704.658 219.466 705.397 219.236 705.977 218.776C706.556 218.315 706.985 217.71 707.263 216.96C707.542 216.21 707.681 215.398 707.681 214.523C707.681 213.648 707.542 212.832 707.263 212.077C706.985 211.321 706.556 210.71 705.977 210.244C705.397 209.778 704.658 209.545 703.761 209.545C702.863 209.545 702.124 209.778 701.545 210.244C700.965 210.71 700.536 211.321 700.258 212.077C699.979 212.832 699.84 213.648 699.84 214.523C699.84 215.398 699.979 216.21 700.258 216.96C700.536 217.71 700.965 218.315 701.545 218.776C702.124 219.236 702.863 219.466 703.761 219.466ZM718.081 221.273C716.854 221.273 715.797 220.983 714.911 220.403C714.024 219.824 713.342 219.026 712.865 218.009C712.388 216.991 712.149 215.83 712.149 214.523C712.149 213.193 712.393 212.02 712.882 211.003C713.376 209.98 714.064 209.182 714.945 208.608C715.831 208.028 716.865 207.739 718.047 207.739C718.967 207.739 719.797 207.909 720.536 208.25C721.274 208.591 721.879 209.068 722.351 209.682C722.822 210.295 723.115 211.011 723.229 211.83H721.217C721.064 211.233 720.723 210.705 720.195 210.244C719.672 209.778 718.967 209.545 718.081 209.545C717.297 209.545 716.609 209.75 716.018 210.159C715.433 210.562 714.976 211.134 714.646 211.872C714.322 212.605 714.161 213.466 714.161 214.455C714.161 215.466 714.32 216.347 714.638 217.097C714.962 217.847 715.416 218.429 716.001 218.844C716.592 219.259 717.286 219.466 718.081 219.466C718.604 219.466 719.078 219.375 719.504 219.193C719.93 219.011 720.291 218.75 720.587 218.409C720.882 218.068 721.092 217.659 721.217 217.182H723.229C723.115 217.955 722.834 218.651 722.385 219.27C721.942 219.884 721.354 220.372 720.621 220.736C719.893 221.094 719.047 221.273 718.081 221.273ZM728.044 216.227L728.01 213.739H728.419L734.146 207.909H736.635L730.533 214.08H730.362L728.044 216.227ZM726.169 221V203.545H728.18V221H726.169ZM734.487 221L729.374 214.523L730.805 213.125L737.044 221H734.487Z" fill="black"/>
      <mask id="path-5-inside-2_635_4172" fill="white">
        <path fill-rule="evenodd" clip-rule="evenodd" d="M1098.36 148H1202.47V209.6V357.095H1264.07V461.208H1202.47H1054.98V515H950.865V461.208V453.4V313.714H891V209.6H950.865H952.6H1098.36V148Z"/>
      </mask>
      <path id="a-block" class="girls-block" :class="{ 'girls-active': block === 1 }" @click="chooseABlock" fill-rule="evenodd" clip-rule="evenodd" d="M1098.36 148H1202.47V209.6V357.095H1264.07V461.208H1202.47H1054.98V515H950.865V461.208V453.4V313.714H891V209.6H950.865H952.6H1098.36V148Z" fill="#F6F6F6"/>
      <path d="M1202.47 148H1203.47V147H1202.47V148ZM1098.36 148V147H1097.36V148H1098.36ZM1202.47 357.095H1201.47V358.095H1202.47V357.095ZM1264.07 357.095H1265.07V356.095H1264.07V357.095ZM1264.07 461.208V462.208H1265.07V461.208H1264.07ZM1054.98 461.208V460.208H1053.98V461.208H1054.98ZM1054.98 515V516H1055.98V515H1054.98ZM950.865 515H949.865V516H950.865V515ZM950.865 313.714H951.865V312.714H950.865V313.714ZM891 313.714H890V314.714H891V313.714ZM891 209.6V208.6H890V209.6H891ZM1098.36 209.6V210.6H1099.36V209.6H1098.36ZM1202.47 147H1098.36V149H1202.47V147ZM1203.47 209.6V148H1201.47V209.6H1203.47ZM1203.47 357.095V209.6H1201.47V357.095H1203.47ZM1202.47 358.095H1264.07V356.095H1202.47V358.095ZM1263.07 357.095V461.208H1265.07V357.095H1263.07ZM1264.07 460.208H1202.47V462.208H1264.07V460.208ZM1054.98 462.208H1202.47V460.208H1054.98V462.208ZM1055.98 515V461.208H1053.98V515H1055.98ZM950.865 516H1054.98V514H950.865V516ZM949.865 461.208V515H951.865V461.208H949.865ZM949.865 453.4V461.208H951.865V453.4H949.865ZM949.865 313.714V453.4H951.865V313.714H949.865ZM891 314.714H950.865V312.714H891V314.714ZM890 209.6V313.714H892V209.6H890ZM950.865 208.6H891V210.6H950.865V208.6ZM952.6 208.6H950.865V210.6H952.6V208.6ZM1098.36 208.6H952.6V210.6H1098.36V208.6ZM1097.36 148V209.6H1099.36V148H1097.36Z" fill="black" mask="url(#path-5-inside-2_635_4172)"/>
      <path d="M1068.43 328H1061.68L1073.97 293.091H1081.77L1094.08 328H1087.33L1078.01 300.25H1077.73L1068.43 328ZM1068.65 314.312H1087.06V319.392H1068.65V314.312Z" fill="black"/>
      <path d="M1049.11 363V345.545H1051.12V351.989H1051.3C1051.44 351.761 1051.65 351.472 1051.91 351.119C1052.18 350.761 1052.56 350.443 1053.05 350.165C1053.55 349.881 1054.23 349.739 1055.08 349.739C1056.18 349.739 1057.15 350.014 1057.99 350.565C1058.84 351.116 1059.49 351.898 1059.96 352.909C1060.43 353.92 1060.67 355.114 1060.67 356.489C1060.67 357.875 1060.43 359.077 1059.96 360.094C1059.49 361.105 1058.84 361.889 1058 362.446C1057.17 362.997 1056.2 363.273 1055.11 363.273C1054.27 363.273 1053.6 363.134 1053.09 362.855C1052.59 362.571 1052.2 362.25 1051.93 361.892C1051.65 361.528 1051.44 361.227 1051.3 360.989H1051.06V363H1049.11ZM1051.09 356.455C1051.09 357.443 1051.24 358.315 1051.53 359.071C1051.82 359.821 1052.24 360.409 1052.8 360.835C1053.35 361.256 1054.03 361.466 1054.84 361.466C1055.68 361.466 1056.38 361.244 1056.95 360.801C1057.51 360.352 1057.94 359.75 1058.22 358.994C1058.51 358.233 1058.66 357.386 1058.66 356.455C1058.66 355.534 1058.52 354.705 1058.23 353.966C1057.95 353.222 1057.53 352.634 1056.96 352.202C1056.4 351.764 1055.69 351.545 1054.84 351.545C1054.02 351.545 1053.34 351.753 1052.78 352.168C1052.22 352.577 1051.8 353.151 1051.52 353.889C1051.23 354.622 1051.09 355.477 1051.09 356.455ZM1065.76 345.545V363H1063.75V345.545H1065.76ZM1074.76 363.273C1073.58 363.273 1072.54 362.991 1071.65 362.429C1070.76 361.866 1070.07 361.08 1069.57 360.068C1069.08 359.057 1068.83 357.875 1068.83 356.523C1068.83 355.159 1069.08 353.969 1069.57 352.952C1070.07 351.935 1070.76 351.145 1071.65 350.582C1072.54 350.02 1073.58 349.739 1074.76 349.739C1075.94 349.739 1076.98 350.02 1077.86 350.582C1078.75 351.145 1079.45 351.935 1079.94 352.952C1080.44 353.969 1080.69 355.159 1080.69 356.523C1080.69 357.875 1080.44 359.057 1079.94 360.068C1079.45 361.08 1078.75 361.866 1077.86 362.429C1076.98 362.991 1075.94 363.273 1074.76 363.273ZM1074.76 361.466C1075.66 361.466 1076.4 361.236 1076.98 360.776C1077.56 360.315 1077.99 359.71 1078.26 358.96C1078.54 358.21 1078.68 357.398 1078.68 356.523C1078.68 355.648 1078.54 354.832 1078.26 354.077C1077.99 353.321 1077.56 352.71 1076.98 352.244C1076.4 351.778 1075.66 351.545 1074.76 351.545C1073.86 351.545 1073.12 351.778 1072.54 352.244C1071.97 352.71 1071.54 353.321 1071.26 354.077C1070.98 354.832 1070.84 355.648 1070.84 356.523C1070.84 357.398 1070.98 358.21 1071.26 358.96C1071.54 359.71 1071.97 360.315 1072.54 360.776C1073.12 361.236 1073.86 361.466 1074.76 361.466ZM1089.08 363.273C1087.85 363.273 1086.8 362.983 1085.91 362.403C1085.02 361.824 1084.34 361.026 1083.87 360.009C1083.39 358.991 1083.15 357.83 1083.15 356.523C1083.15 355.193 1083.39 354.02 1083.88 353.003C1084.38 351.98 1085.06 351.182 1085.94 350.608C1086.83 350.028 1087.87 349.739 1089.05 349.739C1089.97 349.739 1090.8 349.909 1091.54 350.25C1092.27 350.591 1092.88 351.068 1093.35 351.682C1093.82 352.295 1094.12 353.011 1094.23 353.83H1092.22C1092.06 353.233 1091.72 352.705 1091.19 352.244C1090.67 351.778 1089.97 351.545 1089.08 351.545C1088.3 351.545 1087.61 351.75 1087.02 352.159C1086.43 352.562 1085.98 353.134 1085.65 353.872C1085.32 354.605 1085.16 355.466 1085.16 356.455C1085.16 357.466 1085.32 358.347 1085.64 359.097C1085.96 359.847 1086.42 360.429 1087 360.844C1087.59 361.259 1088.29 361.466 1089.08 361.466C1089.6 361.466 1090.08 361.375 1090.5 361.193C1090.93 361.011 1091.29 360.75 1091.59 360.409C1091.88 360.068 1092.09 359.659 1092.22 359.182H1094.23C1094.12 359.955 1093.83 360.651 1093.38 361.27C1092.94 361.884 1092.35 362.372 1091.62 362.736C1090.89 363.094 1090.05 363.273 1089.08 363.273ZM1099.04 358.227L1099.01 355.739H1099.42L1105.15 349.909H1107.63L1101.53 356.08H1101.36L1099.04 358.227ZM1097.17 363V345.545H1099.18V363H1097.17ZM1105.49 363L1100.37 356.523L1101.81 355.125L1108.04 363H1105.49Z" fill="black"/>
      <mask id="path-9-inside-3_635_4172" fill="white">
        <path fill-rule="evenodd" clip-rule="evenodd" d="M580.359 365H684.473V426.6V574.095H746.073V678.208H684.473H536.979V732H432.865V678.208V670.4V530.714H373V426.6H432.865H434.6H580.359V365Z"/>
      </mask>
      <path id="c-block" class="boys-block" :class="{ 'boys-active': block === 3 }" @click="chooseCBlock" fill-rule="evenodd" clip-rule="evenodd" d="M580.359 365H684.473V426.6V574.095H746.073V678.208H684.473H536.979V732H432.865V678.208V670.4V530.714H373V426.6H432.865H434.6H580.359V365Z" fill="#D9D9D9"/>
      <path d="M684.473 365H685.473V364H684.473V365ZM580.359 365V364H579.359V365H580.359ZM684.473 574.095H683.473V575.095H684.473V574.095ZM746.073 574.095H747.073V573.095H746.073V574.095ZM746.073 678.208V679.208H747.073V678.208H746.073ZM536.979 678.208V677.208H535.979V678.208H536.979ZM536.979 732V733H537.979V732H536.979ZM432.865 732H431.865V733H432.865V732ZM432.865 530.714H433.865V529.714H432.865V530.714ZM373 530.714H372V531.714H373V530.714ZM373 426.6V425.6H372V426.6H373ZM580.359 426.6V427.6H581.359V426.6H580.359ZM684.473 364H580.359V366H684.473V364ZM685.473 426.6V365H683.473V426.6H685.473ZM685.473 574.095V426.6H683.473V574.095H685.473ZM684.473 575.095H746.073V573.095H684.473V575.095ZM745.073 574.095V678.208H747.073V574.095H745.073ZM746.073 677.208H684.473V679.208H746.073V677.208ZM536.979 679.208H684.473V677.208H536.979V679.208ZM537.979 732V678.208H535.979V732H537.979ZM432.865 733H536.979V731H432.865V733ZM431.865 678.208V732H433.865V678.208H431.865ZM431.865 670.4V678.208H433.865V670.4H431.865ZM431.865 530.714V670.4H433.865V530.714H431.865ZM373 531.714H432.865V529.714H373V531.714ZM372 426.6V530.714H374V426.6H372ZM432.865 425.6H373V427.6H432.865V425.6ZM434.6 425.6H432.865V427.6H434.6V425.6ZM580.359 425.6H434.6V427.6H580.359V425.6ZM579.359 365V426.6H581.359V365H579.359Z" fill="black" mask="url(#path-9-inside-3_635_4172)"/>
      <path d="M575.324 527.869H568.949C568.767 526.824 568.432 525.898 567.943 525.091C567.455 524.273 566.847 523.58 566.119 523.011C565.392 522.443 564.563 522.017 563.631 521.733C562.71 521.438 561.716 521.29 560.648 521.29C558.75 521.29 557.068 521.767 555.602 522.722C554.136 523.665 552.989 525.051 552.159 526.881C551.33 528.699 550.915 530.92 550.915 533.545C550.915 536.216 551.33 538.466 552.159 540.295C553 542.114 554.148 543.489 555.602 544.42C557.068 545.341 558.744 545.801 560.631 545.801C561.676 545.801 562.653 545.665 563.562 545.392C564.483 545.108 565.307 544.693 566.034 544.148C566.773 543.602 567.392 542.932 567.892 542.136C568.403 541.341 568.756 540.432 568.949 539.409L575.324 539.443C575.085 541.102 574.568 542.659 573.773 544.114C572.989 545.568 571.96 546.852 570.688 547.966C569.415 549.068 567.926 549.932 566.222 550.557C564.517 551.17 562.625 551.477 560.545 551.477C557.477 551.477 554.739 550.767 552.33 549.347C549.92 547.926 548.023 545.875 546.636 543.193C545.25 540.511 544.557 537.295 544.557 533.545C544.557 529.784 545.256 526.568 546.653 523.898C548.051 521.216 549.955 519.165 552.364 517.744C554.773 516.324 557.5 515.614 560.545 515.614C562.489 515.614 564.295 515.886 565.966 516.432C567.636 516.977 569.125 517.778 570.432 518.835C571.739 519.881 572.813 521.165 573.653 522.688C574.506 524.199 575.063 525.926 575.324 527.869Z" fill="black"/>
      <path d="M531.114 586V568.545H533.125V574.989H533.295C533.443 574.761 533.648 574.472 533.909 574.119C534.176 573.761 534.557 573.443 535.051 573.165C535.551 572.881 536.227 572.739 537.08 572.739C538.182 572.739 539.153 573.014 539.994 573.565C540.835 574.116 541.491 574.898 541.963 575.909C542.435 576.92 542.67 578.114 542.67 579.489C542.67 580.875 542.435 582.077 541.963 583.094C541.491 584.105 540.838 584.889 540.003 585.446C539.168 585.997 538.205 586.273 537.114 586.273C536.273 586.273 535.599 586.134 535.094 585.855C534.588 585.571 534.199 585.25 533.926 584.892C533.653 584.528 533.443 584.227 533.295 583.989H533.057V586H531.114ZM533.091 579.455C533.091 580.443 533.236 581.315 533.526 582.071C533.815 582.821 534.239 583.409 534.795 583.835C535.352 584.256 536.034 584.466 536.841 584.466C537.682 584.466 538.384 584.244 538.946 583.801C539.514 583.352 539.94 582.75 540.224 581.994C540.514 581.233 540.659 580.386 540.659 579.455C540.659 578.534 540.517 577.705 540.233 576.966C539.955 576.222 539.531 575.634 538.963 575.202C538.401 574.764 537.693 574.545 536.841 574.545C536.023 574.545 535.335 574.753 534.778 575.168C534.222 575.577 533.801 576.151 533.517 576.889C533.233 577.622 533.091 578.477 533.091 579.455ZM547.759 568.545V586H545.747V568.545H547.759ZM556.761 586.273C555.579 586.273 554.542 585.991 553.65 585.429C552.763 584.866 552.07 584.08 551.57 583.068C551.076 582.057 550.829 580.875 550.829 579.523C550.829 578.159 551.076 576.969 551.57 575.952C552.07 574.935 552.763 574.145 553.65 573.582C554.542 573.02 555.579 572.739 556.761 572.739C557.942 572.739 558.977 573.02 559.863 573.582C560.755 574.145 561.448 574.935 561.942 575.952C562.442 576.969 562.692 578.159 562.692 579.523C562.692 580.875 562.442 582.057 561.942 583.068C561.448 584.08 560.755 584.866 559.863 585.429C558.977 585.991 557.942 586.273 556.761 586.273ZM556.761 584.466C557.658 584.466 558.397 584.236 558.977 583.776C559.556 583.315 559.985 582.71 560.263 581.96C560.542 581.21 560.681 580.398 560.681 579.523C560.681 578.648 560.542 577.832 560.263 577.077C559.985 576.321 559.556 575.71 558.977 575.244C558.397 574.778 557.658 574.545 556.761 574.545C555.863 574.545 555.124 574.778 554.545 575.244C553.965 575.71 553.536 576.321 553.258 577.077C552.979 577.832 552.84 578.648 552.84 579.523C552.84 580.398 552.979 581.21 553.258 581.96C553.536 582.71 553.965 583.315 554.545 583.776C555.124 584.236 555.863 584.466 556.761 584.466ZM571.081 586.273C569.854 586.273 568.797 585.983 567.911 585.403C567.024 584.824 566.342 584.026 565.865 583.009C565.388 581.991 565.149 580.83 565.149 579.523C565.149 578.193 565.393 577.02 565.882 576.003C566.376 574.98 567.064 574.182 567.945 573.608C568.831 573.028 569.865 572.739 571.047 572.739C571.967 572.739 572.797 572.909 573.536 573.25C574.274 573.591 574.879 574.068 575.351 574.682C575.822 575.295 576.115 576.011 576.229 576.83H574.217C574.064 576.233 573.723 575.705 573.195 575.244C572.672 574.778 571.967 574.545 571.081 574.545C570.297 574.545 569.609 574.75 569.018 575.159C568.433 575.562 567.976 576.134 567.646 576.872C567.322 577.605 567.161 578.466 567.161 579.455C567.161 580.466 567.32 581.347 567.638 582.097C567.962 582.847 568.416 583.429 569.001 583.844C569.592 584.259 570.286 584.466 571.081 584.466C571.604 584.466 572.078 584.375 572.504 584.193C572.93 584.011 573.291 583.75 573.587 583.409C573.882 583.068 574.092 582.659 574.217 582.182H576.229C576.115 582.955 575.834 583.651 575.385 584.27C574.942 584.884 574.354 585.372 573.621 585.736C572.893 586.094 572.047 586.273 571.081 586.273ZM581.044 581.227L581.01 578.739H581.419L587.146 572.909H589.635L583.533 579.08H583.362L581.044 581.227ZM579.169 586V568.545H581.18V586H579.169ZM587.487 586L582.374 579.523L583.805 578.125L590.044 586H587.487Z" fill="black"/>
      <mask id="path-13-inside-4_635_4172" fill="white">
        <path fill-rule="evenodd" clip-rule="evenodd" d="M207.359 218H311.473V279.6V427.095H373.073V531.208H311.473H163.979V585H59.8652V531.208V523.4V383.714H0V279.6H59.8652H61.6005H207.359V218Z"/>
      </mask>
      <path id="d-block" class="boys-block" :class="{ 'boys-active': block === 4 }" @click="chooseDBlock" fill-rule="evenodd" clip-rule="evenodd" d="M207.359 218H311.473V279.6V427.095H373.073V531.208H311.473H163.979V585H59.8652V531.208V523.4V383.714H0V279.6H59.8652H61.6005H207.359V218Z" fill="#D9D9D9"/>
      <path d="M311.473 218H312.473V217H311.473V218ZM207.359 218V217H206.359V218H207.359ZM311.473 427.095H310.473V428.095H311.473V427.095ZM373.073 427.095H374.073V426.095H373.073V427.095ZM373.073 531.208V532.208H374.073V531.208H373.073ZM163.979 531.208V530.208H162.979V531.208H163.979ZM163.979 585V586H164.979V585H163.979ZM59.8652 585H58.8652V586H59.8652V585ZM59.8652 383.714H60.8652V382.714H59.8652V383.714ZM0 383.714H-1V384.714H0V383.714ZM0 279.6V278.6H-1V279.6H0ZM207.359 279.6V280.6H208.359V279.6H207.359ZM311.473 217H207.359V219H311.473V217ZM312.473 279.6V218H310.473V279.6H312.473ZM312.473 427.095V279.6H310.473V427.095H312.473ZM311.473 428.095H373.073V426.095H311.473V428.095ZM372.073 427.095V531.208H374.073V427.095H372.073ZM373.073 530.208H311.473V532.208H373.073V530.208ZM163.979 532.208H311.473V530.208H163.979V532.208ZM164.979 585V531.208H162.979V585H164.979ZM59.8652 586H163.979V584H59.8652V586ZM58.8652 531.208V585H60.8652V531.208H58.8652ZM58.8652 523.4V531.208H60.8652V523.4H58.8652ZM58.8652 383.714V523.4H60.8652V383.714H58.8652ZM0 384.714H59.8652V382.714H0V384.714ZM-1 279.6V383.714H1V279.6H-1ZM59.8652 278.6H0V280.6H59.8652V278.6ZM61.6005 278.6H59.8652V280.6H61.6005V278.6ZM207.359 278.6H61.6005V280.6H207.359V278.6ZM206.359 218V279.6H208.359V218H206.359Z" fill="black" mask="url(#path-13-inside-4_635_4172)"/>
      <path d="M184.773 404H172.943V369.091H185.011C188.477 369.091 191.455 369.79 193.943 371.188C196.443 372.574 198.364 374.568 199.705 377.17C201.045 379.773 201.716 382.886 201.716 386.511C201.716 390.148 201.04 393.273 199.688 395.886C198.347 398.5 196.409 400.506 193.875 401.903C191.352 403.301 188.318 404 184.773 404ZM179.267 398.528H184.466C186.898 398.528 188.926 398.085 190.551 397.199C192.176 396.301 193.398 394.966 194.216 393.193C195.034 391.409 195.443 389.182 195.443 386.511C195.443 383.841 195.034 381.625 194.216 379.864C193.398 378.091 192.188 376.767 190.585 375.892C188.994 375.006 187.017 374.562 184.653 374.562H179.267V398.528Z" fill="black"/>
      <path d="M158.114 439V421.545H160.125V427.989H160.295C160.443 427.761 160.648 427.472 160.909 427.119C161.176 426.761 161.557 426.443 162.051 426.165C162.551 425.881 163.227 425.739 164.08 425.739C165.182 425.739 166.153 426.014 166.994 426.565C167.835 427.116 168.491 427.898 168.963 428.909C169.435 429.92 169.67 431.114 169.67 432.489C169.67 433.875 169.435 435.077 168.963 436.094C168.491 437.105 167.838 437.889 167.003 438.446C166.168 438.997 165.205 439.273 164.114 439.273C163.273 439.273 162.599 439.134 162.094 438.855C161.588 438.571 161.199 438.25 160.926 437.892C160.653 437.528 160.443 437.227 160.295 436.989H160.057V439H158.114ZM160.091 432.455C160.091 433.443 160.236 434.315 160.526 435.071C160.815 435.821 161.239 436.409 161.795 436.835C162.352 437.256 163.034 437.466 163.841 437.466C164.682 437.466 165.384 437.244 165.946 436.801C166.514 436.352 166.94 435.75 167.224 434.994C167.514 434.233 167.659 433.386 167.659 432.455C167.659 431.534 167.517 430.705 167.233 429.966C166.955 429.222 166.531 428.634 165.963 428.202C165.401 427.764 164.693 427.545 163.841 427.545C163.023 427.545 162.335 427.753 161.778 428.168C161.222 428.577 160.801 429.151 160.517 429.889C160.233 430.622 160.091 431.477 160.091 432.455ZM174.759 421.545V439H172.747V421.545H174.759ZM183.761 439.273C182.579 439.273 181.542 438.991 180.65 438.429C179.763 437.866 179.07 437.08 178.57 436.068C178.076 435.057 177.829 433.875 177.829 432.523C177.829 431.159 178.076 429.969 178.57 428.952C179.07 427.935 179.763 427.145 180.65 426.582C181.542 426.02 182.579 425.739 183.761 425.739C184.942 425.739 185.977 426.02 186.863 426.582C187.755 427.145 188.448 427.935 188.942 428.952C189.442 429.969 189.692 431.159 189.692 432.523C189.692 433.875 189.442 435.057 188.942 436.068C188.448 437.08 187.755 437.866 186.863 438.429C185.977 438.991 184.942 439.273 183.761 439.273ZM183.761 437.466C184.658 437.466 185.397 437.236 185.977 436.776C186.556 436.315 186.985 435.71 187.263 434.96C187.542 434.21 187.681 433.398 187.681 432.523C187.681 431.648 187.542 430.832 187.263 430.077C186.985 429.321 186.556 428.71 185.977 428.244C185.397 427.778 184.658 427.545 183.761 427.545C182.863 427.545 182.124 427.778 181.545 428.244C180.965 428.71 180.536 429.321 180.258 430.077C179.979 430.832 179.84 431.648 179.84 432.523C179.84 433.398 179.979 434.21 180.258 434.96C180.536 435.71 180.965 436.315 181.545 436.776C182.124 437.236 182.863 437.466 183.761 437.466ZM198.081 439.273C196.854 439.273 195.797 438.983 194.911 438.403C194.024 437.824 193.342 437.026 192.865 436.009C192.388 434.991 192.149 433.83 192.149 432.523C192.149 431.193 192.393 430.02 192.882 429.003C193.376 427.98 194.064 427.182 194.945 426.608C195.831 426.028 196.865 425.739 198.047 425.739C198.967 425.739 199.797 425.909 200.536 426.25C201.274 426.591 201.879 427.068 202.351 427.682C202.822 428.295 203.115 429.011 203.229 429.83H201.217C201.064 429.233 200.723 428.705 200.195 428.244C199.672 427.778 198.967 427.545 198.081 427.545C197.297 427.545 196.609 427.75 196.018 428.159C195.433 428.562 194.976 429.134 194.646 429.872C194.322 430.605 194.161 431.466 194.161 432.455C194.161 433.466 194.32 434.347 194.638 435.097C194.962 435.847 195.416 436.429 196.001 436.844C196.592 437.259 197.286 437.466 198.081 437.466C198.604 437.466 199.078 437.375 199.504 437.193C199.93 437.011 200.291 436.75 200.587 436.409C200.882 436.068 201.092 435.659 201.217 435.182H203.229C203.115 435.955 202.834 436.651 202.385 437.27C201.942 437.884 201.354 438.372 200.621 438.736C199.893 439.094 199.047 439.273 198.081 439.273ZM208.044 434.227L208.01 431.739H208.419L214.146 425.909H216.635L210.533 432.08H210.362L208.044 434.227ZM206.169 439V421.545H208.18V439H206.169ZM214.487 439L209.374 432.523L210.805 431.125L217.044 439H214.487Z" fill="black"/>
    </svg>
  </div>
</template>

<script>
import {mapGetters} from "vuex";

export default {
  data: () => ({
    block: parseInt(localStorage.getItem('selectedBlock')) || 0,
    purchasedPlace: [],
  }),
  beforeRouteLeave(to, from, next) {
    const selectedBlock = localStorage.getItem('selectedBlock');
    if (selectedBlock) {
      localStorage.removeItem('selectedBlock');
      next();
    }
  },
  computed: {
    ...mapGetters(["getUser", "getAuth"]),
    filteredPurchasedPlace() {
      return this.purchasedPlace.filter(place => place.taken_by === this.getUser.id);
    }
  },
  methods: {
    async fetchTakenPlaceData() {
      await this.$axios
          .get('get_taken_places/',
              {
                headers: {
                  Authorization: `Bearer ${localStorage.getItem("access_token")}`,
                },
              }
          )
          .then((response) => {
            this.purchasedPlace = response.data;
          })
          .catch((e) => {
            console.log(e);
          });
    },
    chooseABlock() {
      if(this.getUser.gender === 'Female') {
        if (this.filteredPurchasedPlace.length > 0) {
          this.$toaster.error("You already have a place");
        } else {
          this.block = 1;
          this.updateSelectedBlock();
          this.saveSelectedBlock(this.block);
        }
      } else {
        this.$toaster.error("Only female people can choose this building!");
      }
    },
    chooseBBlock() {
      if(this.getUser.gender === 'Female') {
        if (this.filteredPurchasedPlace.length > 0) {
          this.$toaster.error("You already have a place");
        } else {
          this.block = 2;
          this.updateSelectedBlock();
          this.saveSelectedBlock(this.block);
        }
      } else {
        this.$toaster.error("Only female people can choose this building!");
      }
    },
    chooseCBlock() {
      if(this.getUser.gender === 'Male') {
        if (this.filteredPurchasedPlace.length > 0) {
          this.$toaster.error("You already have a place");
        } else {
          this.block = 3;
          this.updateSelectedBlock();
          this.saveSelectedBlock(this.block);
        }
      } else {
        this.$toaster.error("Only male people can choose this building!");
      }
    },
    chooseDBlock() {
      if(this.getUser.gender === 'Male') {
        if (this.filteredPurchasedPlace.length > 0) {
          this.$toaster.error("You already have a place");
        } else {
          this.block = 3;
          this.updateSelectedBlock();
          this.saveSelectedBlock(this.block);
        }
      } else {
        this.$toaster.error("Only male people can choose this building!");
      }
    },
    saveSelectedBlock(block) {
      localStorage.setItem('selectedBlock', block);
    },
    updateSelectedBlock() {
      this.$store.commit('SET_SELECTED_BLOCK', this.block);
      this.$router.push({query: {block: this.block}})
      this.$emit('stage-change', 2);
    },
  },
  created() {
    this.fetchTakenPlaceData();
    console.log(this.filteredPurchasedPlace);
  }
}
</script>

<style lang="scss" scoped>
.block-map {
  display: flex;
  align-items: center;
  justify-content: center;
  width: 100%;
  height: auto;
}

svg {
  max-width: min(max(300px, calc(18.75rem + ((1vw - 3.93px) * 63.1958))), 1265px);
  height: 100%;
}

.boys-block {
  max-width: 100%;
  height: auto;
  cursor: pointer;
  &:hover {
    fill: $primary;
  }
}

.girls-block {
  max-width: 100%;
  height: auto;
  cursor: pointer;
  &:hover {
    fill: $secondary;
  }
}

.boys-active {
  fill: $primary;
}

.girls-active {
  fill: $secondary;
}
</style>